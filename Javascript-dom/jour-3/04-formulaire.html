<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire</title>

    <script src="form-tools.js"></script>

    <script>


        window.onload = function () {

            // on cible le formulaire
            const form = document.getElementById("form");
            form.onsubmit = function (ev) {
                ev.preventDefault();
                person = formToObject(ev.target);
                console.log(person);


                const personList = document.getElementById("list");
                
                //suppression d'un élément 
                //personList.lastElementChild.remove()
                //création de l’élément
                const item = document.createElement("li");
                //définition du premier élément de la liste
                const firstItem = personList.firstElementChild
                //Modification des attributs
                item.innerHTML = person.firstName + "<button class=delete>Supprimer</button>" ;
                item.style.backgroundColor = "red";
                item.style.color = "black";
                //Ajout comme dernier enfant
                personList.appendChild(item);
                //ajout de lélément comme enfant de la lide des personnes
                // personList.apprendChlid(item);// fin de liste
                //personList.insertBefore(item, firstItem);// début de liste
               // remplacement d'un enfant par un autre personList.replaceChild(item, firstItem);

               //gestion de la suppression des éléments avec une délégation d'évènement
               personList.onclick = function(ev){
                   if(ev.target.classList.contains("delete")){
                       //le bouton est dans un li il faut donc supprimer le parent du bouton
                       ev.target.parentElement.remove()
                   }
               }

            }


        };

    </script>
</head>

<body>
    <form id="form">
        <div>
            <label for="firstName">Prénom</label>
            <input type="text" name="firstName">
        </div>
        <div>
            <label for="age">Age</label>
            <input type="number" name="age">
        </div>
        <div>
            <label for="adresse">Adresse</label>
            <input type="text" name="adresse">
        </div>
        <div>
            <label for="ville">Ville</label>
            <input type="text" name="ville">
        </div>

        <div>
            <button type="submit">Envoyer</button>
            <button type="reset">Annuler</button>
        </div>


    </form>
    <div id="message"> </div>

    <ul id="list">
        <li>Pierre <button class="delete">Supprimer</button></li>
        <li>Alice <button class="delete">Supprimer</button></li>
    </ul>
</body>

</html>